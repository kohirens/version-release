description: |2
  Trigger a job to tag and release a spcified branch.
parameters:
  branch:
    description: Name of the branch to tag.
    type: string
    default: "main"
  ghToken:
    description: Name of the environment variable holding the GitHub API token.
    type: env_var_name
    default: GH_TOKE
  changelogFile:
    description: Location to output/update the CHANGELOG file.
    type: string
    default: "CHANGELOG.md"
  configFile:
    description: Location of a git-chglog configuration file.
    type: string
    default: ".chglog/config.yml"
executor: default
steps:
  - git-chglog-update:
      configFile: "<< parameters.configFile >>"
      outputFile: "<< parameters.changelogFile >>"
  - run:
      environment:
        PARAM_BRANCH: << parameters.branch >>
        PARAM_CHANGELOG_FILE: << parameters.changelogFile >>
      name: Make A New Release
      command: << include(scripts/tag-and-release.sh) >>
